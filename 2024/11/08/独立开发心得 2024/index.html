
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1">
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  <!-- 加入字体 -->
  <link rel="stylesheet" href="/font/result.css" />
  <title>独立开发心得 2024 - Radiant Moon</title>

  
    <meta name="description" content="网上别人写的独立开发心得。">
<meta property="og:type" content="article">
<meta property="og:title" content="独立开发心得 2024">
<meta property="og:url" content="https://cxp.netlify.app/2024/11/08/%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E5%BF%83%E5%BE%97%202024/index.html">
<meta property="og:site_name" content="Radiant Moon">
<meta property="og:description" content="网上别人写的独立开发心得。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://storage.guangzhengli.com/images/t4-stack.png">
<meta property="article:published_time" content="2024-11-08T08:16:34.148Z">
<meta property="article:modified_time" content="2024-11-08T08:18:06.522Z">
<meta property="article:author" content="Radiant Moon">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://storage.guangzhengli.com/images/t4-stack.png">
  
  
  
  <meta name="keywords" content="前端">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Radiant Moon" type="application/atom+xml">
  

  <link rel="stylesheet" href="/css/main.css?v=1.29.1">

  
    <link rel="shortcut icon" href="/favicon.ico">
  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/favicon.ico" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Radiant Moon</div><div class="sub cap">Embracing the Fortune of Light</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="站内搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/2024/07/31/Chatgpt%20%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B/"><span class="title">Chatgpt 提示工程</span></a><a class="item title" href="/2024/12/05/%E4%BA%BA%E7%94%9F%E7%AE%97%E6%B3%95/"><span class="title">人生算法</span></a><a class="item title" href="/2024/08/01/%E8%B4%AD%E7%89%A9%E6%B8%85%E5%8D%95/"><span class="title">购物清单</span></a><a class="item title" href="/2024/11/25/%E8%8D%AF%E9%85%92/"><span class="title">药酒</span></a><a class="item title" href="/2024/07/31/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"><span class="title">常用搜索技巧</span></a><a class="item title" href="/2024/08/26/Mac%20%E5%A4%87%E5%BF%98/"><span class="title">Mac 备忘</span></a><a class="item title" href="/2024/08/27/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/"><span class="title">生活感悟</span></a><a class="item title" href="/2024/07/31/%E5%B7%A5%E5%85%B7%E8%B5%84%E6%BA%90/"><span class="title">工具资源</span></a><a class="item title" href="/2024/11/08/%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E5%BF%83%E5%BE%97%202024/"><span class="title">独立开发心得 2024</span></a><a class="item title" href="/2024/10/24/%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82API%E6%96%B9%E5%BC%8F/"><span class="title">前端请求 API 方式</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">文章</a></div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2024-11-08T08:16:34.148Z">2024-11-08</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2024-11-08T08:18:06.522Z">2024-11-08</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>独立开发心得 2024</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h2 id="为什么是独立开发"><a href="#为什么是独立开发" class="headerlink" title="为什么是独立开发"></a>为什么是独立开发</h2><p>为什么我要将技术的选型仅仅局限在独立开发上呢？因为如果我们不是独立开发，而是替公司或者客户开发的话，个人觉得技术选型的余地不大，乐趣也不高。</p>
<p>首先除了少有的创业公司，现有的公司或者项目一般都已经有了完善的技术栈和规范，更推荐的是在老的技术栈上进行重构，或者有计划的淘汰老的微服务，在新的微服务上引入新技术，而不是为了最求新颖的技术栈而全面推翻重来。</p>
<p>而就算在老的项目上引入新的技术栈，优先考虑的也是利于团队协同开发的技术栈，例如方便招人的、利于团队合作的技术。</p>
<p>所以如果想要满足自己的技术热情，最好的办法还是加入开源项目，或者开发自己的独立项目。</p>
<p>好啦，那我们正式开始推荐吧～</p>
<h2 id="Frontend"><a href="#Frontend" class="headerlink" title="Frontend"></a>Frontend</h2><h3 id="Nextjs"><a href="#Nextjs" class="headerlink" title="Nextjs"></a><a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a></h3><p>如果你主要是构建前端应用，或者是前端 + 轻量级后端 API 的项目，那么目前最推荐的还是 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> 这个框架，它是是一个基于 React 的开源框架。</p>
<p>推荐理由：</p>
<ul>
<li>学习曲线平缓，并且官方的实战教程非常友好：<a target="_blank" rel="noopener" href="https://nextjs.org/learn">https://nextjs.org/learn</a></li>
<li>生态非常的丰富，有非常多的可以满足不同需求的脚手架，例如 <a target="_blank" rel="noopener" href="https://github.com/t3-oss/create-t3-app">create-t3-app</a> 这个开源的脚手架项目，可以选择性的集成鉴权、ORM、UI 等功能和技术栈。</li>
<li>部署简单，毕竟是 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 的母公司开发的框架，可以非常丝滑的部署到 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 上。</li>
</ul>
<p>为什么一上来就推荐 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a>？一是 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> 本身就是一个可以快速创建和部署的框架，可以快速上线我们的项目；二是 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> 对于我们后面集成推荐的技术栈和平台都非常的友好方便。</p>
<p>例如你想要部署一个静态网站，比如文档教程，那么你可以使用 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> 的 Static Site Generation (SSG)，搭配上一些 CDN 托管服务，这里非常推荐 <a target="_blank" rel="noopener" href="https://pages.cloudflare.com/">Cloudflare Pages</a>，Cloudflare 是笔者唯一五星推荐的云服务商，后面还会再提到。例如 <a target="_blank" rel="noopener" href="https://nextra.site/">nextra</a> 这个项目就是一个基于 <a target="_blank" rel="noopener" href="https://nextra.site/docs/guide/ssg">Nextjs + SSG</a> 的文档类型开源项目。</p>
<p>当然你也可以部署一些需要轻量级 API 的全栈项目，例如博客、AI Chatbot 等，你可以使用 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> 的 Server Side Rendering (SSR) 和 API Routes，搭配上一些云服务商的云函数，例如 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 的 <a target="_blank" rel="noopener" href="https://vercel.com/docs/functions">Serverless Functions</a>，或者 <a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/">Cloudflare Worker</a>，就可以快速的部署一个全栈项目。</p>
<p>例如 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> + <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 的核心人物 <a target="_blank" rel="noopener" href="https://leerob.io/">leerob</a> 的博客就是一个很好的例子，他的个人博客就是基于 SSR + API Routes 做了一些例如评论、订阅等功能，然后部署在 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 上。</p>
<p>对于独立开发者来说，最重要的就是快速的上线我们的项目，而不是花费大量的时间在造轮子、部署和维护上，所以 <a target="_blank" rel="noopener" href="https://nextjs.org/">Nextjs</a> + <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 是一个非常好的选择，即使后面 Vercel 平台涨价或者不免费了，也可以替换为 cloudflare 等其它云服务厂商。</p>
<h3 id="TailwindCSS-Shadcn-ui"><a href="#TailwindCSS-Shadcn-ui" class="headerlink" title="TailwindCSS + Shadcn&#x2F;ui"></a>TailwindCSS + Shadcn&#x2F;ui</h3><p>在 UI 样式框架的选择上，有非常多的选择，这里不得不佩服前端开发者的生态之丰富，这在其它的语言生态下是难以想象的。</p>
<p>这里笔者只推荐个人用的还算是比较舒服的 <a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> + <a target="_blank" rel="noopener" href="https://ui.shadcn.com/">Shadcn&#x2F;ui</a>。</p>
<p><a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> 推荐理由：</p>
<ul>
<li>对比原来的 CSS 的写法，<a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> 方便了很多，内置语法糖。</li>
<li>高度可定制，代码规范一致。</li>
<li>可以很好地与现代前端工具（如 PostCSS、PurgeCSS 等）集成。</li>
</ul>
<p>这里我把 <a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> 列为推荐的还有一个重要原因是，在 GPT、Github Copilot 这样的代码生成工具普及的今天，AI 能够很好的生成 <a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> + JSX 的代码，是一种对 AI 友好的代码风格。</p>
<p><a target="_blank" rel="noopener" href="https://ui.shadcn.com/">Shadcn&#x2F;ui</a> 推荐理由：</p>
<ul>
<li>超高自由度的 UI 框架，可以很好的与 <a target="_blank" rel="noopener" href="https://tailwindcss.com/">TailwindCSS</a> 配合。</li>
<li>自身的样式设计已经非常的美观，还有大量的代码样例可以直接使用，例如 <a target="_blank" rel="noopener" href="https://ui.shadcn.com/blocks">blocks</a> 里面大量的样例代码。</li>
</ul>
<p>shadcn&#x2F;ui 与常见的 Ant Design 和 Chakra 等 Component library 不同，它是一个使用 Tailwind CSS 封装 <a target="_blank" rel="noopener" href="https://www.radix-ui.com/">radix-ui</a>（基于 headless ui 的无样式组件库）的项目。这样的做法是一把双刃剑，优点是可以高度定制化、按需使用等等，但缺点是安装和更新不方便，未来的更新可能会受到 radix-ui 的影响。</p>
<p>推荐 shadcn&#x2F;ui 还有一个原因也与 AI 有关，shadcn&#x2F;ui 作者已经加入了 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a> 公司开发 <a target="_blank" rel="noopener" href="https://v0.dev/">V0</a> 这个 AI 前端代码生成工具，所以个人还是比较看好 shadcn&#x2F;ui 的未来。</p>
<p>综合来看关于 shadcn&#x2F;ui 大家可以按需选择，关于 shadcn&#x2F;ui 的更多细节可以看<a target="_blank" rel="noopener" href="https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/why-shadcn-ui-is-so-popular-in-2023-0f95e66f3ddc">这篇文章</a>。</p>
<p>另外还有一些常见的值得一试的 UI 框架还有：<a target="_blank" rel="noopener" href="https://daisyui.com/">daisyui</a> 和 <a target="_blank" rel="noopener" href="https://chakra-ui.com/">chakraui</a>。</p>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.prisma.io/">Prisma</a>: 数据库 ORM，即使性能不是最好的，但确实是生态是最好的，各类数据库和云厂商都有支持。方便后期数据量大后需要切换数据库。<ul>
<li><a target="_blank" rel="noopener" href="https://orm.drizzle.team/">Drizzle</a>: 如果选择 Serverless 方案，可以考虑使用 Drizzle ORM，Drizzle ORM 针对 Serverless 场景做了专门的优化，打包后仅仅 31 KB。</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://next-auth.js.org/">NextAuth.js</a>: Nextjs 的鉴权库，虽然文档是混乱了点，但生态和功能性确实是最好的。</li>
<li><a target="_blank" rel="noopener" href="https://swr.vercel.app/">SWR</a>: Nextjs 团队出品，HTTP 请求库，解决组件数据请求和缓存的问题。</li>
<li><a target="_blank" rel="noopener" href="https://zod.dev/">zod</a>: Schema 验证库，可以用于前后端数据和表单的校验。</li>
<li><a target="_blank" rel="noopener" href="https://zustand.surge.sh/">Zustand</a> &amp; <a target="_blank" rel="noopener" href="https://jotai.org/">jotai</a>: Zustand 是一个简单的 React 状态管理库，可以替代 Redux。jotai 是一个基于原子状态的状态管理库，具体可以根据需要选择。<ul>
<li>关于状态库的选择，相关视频非常推荐这个：<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=5-1LM2NySR0">React Query Essentials</a>。关于什么是状态库管理文章推荐这个系列：<a target="_blank" rel="noopener" href="https://tkdodo.eu/blog/practical-react-query">practical-react-query</a>。</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://driverjs.com/">driverjs</a>: 引导用户操作的库，可以用于新手引导、操作引导等。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/wxt-dev/wxt">wxt</a>: 一个类似 Nuxt 的浏览器插件开发框架，可以用于开发 Chrome、Firefox 等插件。</li>
<li><a target="_blank" rel="noopener" href="https://oramasearch.com/">orama</a>: 前端全文搜索替代 algolia 的方案，nodejs 新官网就是使用的这个搜索引擎。</li>
</ul>
<h2 id="Backend"><a href="#Backend" class="headerlink" title="Backend"></a>Backend</h2><p>说完了前端库和平台的选择，我们来到后端的领域，其实纯后端的选择反而不多。因为后端想要提供服务，离不开 CPU、内存、带宽等资源，而这些资源各大花销都不少，所以我更多推荐 Serverless 的方案。如果你想要熟悉的后端框架，也可以使用 <a target="_blank" rel="noopener" href="https://railway.app/">Railway</a>、<a target="_blank" rel="noopener" href="https://fly.io/">Fly.io</a> 等平台来部署容器。</p>
<h3 id="Cloudflare-Worker"><a href="#Cloudflare-Worker" class="headerlink" title="Cloudflare Worker"></a>Cloudflare Worker</h3><p>选择 Serverless 是最省钱的方案，因为一切都是按量付费，这意味着在你的独立项目开始一段时间内，不用担心服务费用的问题，唯一要小心的就是云服务平台打着免费的幌子，等你深度使用后再收割韭菜，毕竟 Serverless 方案换云服务平台还是比较麻烦的。所以如果你想要选择 Serverless 方案，我唯一推荐的就是 <a target="_blank" rel="noopener" href="https://workers.cloudflare.com/">Cloudflare Worker</a>。</p>
<p><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/platform/pricing/#workers">Free Plan</a> 就可以提供 100,000 次&#x2F;天的请求，这能应付大部分的项目，唯一不足的是 Free Plan 的 10ms 的 CPU 执行时间非常短，会导致很多的计算超时失效。但是好在 $5&#x2F;月的 <a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/platform/pricing/#workers">Standard Plan</a> 并不贵，提高到 30s 的 CPU 执行时间和超多的时间额度，这对于大部分的项目来说已经足够了。</p>
<p>并且 <a target="_blank" rel="noopener" href="https://workers.cloudflare.com/">Cloudflare Worker</a> 会和我们后面推荐的其它 Cloudflare 服务很好的结合，例如 KV(键值数据库)、Pages(静态页面)、R2(对象存储)、D1(关系型数据库)、Queue(MQ 队列) 等，这些服务大部分都是可以免费使用和共享 Standard Plan 额度。</p>
<p>选择 <a target="_blank" rel="noopener" href="https://workers.cloudflare.com/">Cloudflare Worker</a> 后，我们既可以使用原生的 nodejs，因为它的 Worker 代码是基于 V8 引擎的，所以你可以使用 JavaScript、TypeScript、Rust 等语言来编写你的 Worker 代码。</p>
<p>也可以使用像 <a target="_blank" rel="noopener" href="https://hono.dev/">hono.dev</a> 这样的 Serverless 框架，它是面向 edge runtime 的 web 框架，提供了很多的开箱即用的功能，例如路由、中间件等。它还提供不同 Serverless 平台的兼容性，例如 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a>、<a target="_blank" rel="noopener" href="https://aws.amazon.com/lambda/">AWS Lambda</a> 等。</p>
<h3 id="Railway-Fly-io"><a href="#Railway-Fly-io" class="headerlink" title="Railway &amp; Fly.io"></a>Railway &amp; Fly.io</h3><p>如果你的项目不适合使用 Serverless 方案，毕竟 Serverless 还是存在一些缺陷，例如 CPU 时间、易用性、调试等问题，那么你可以选择你已经熟悉的后端语言，选择容器部署的方案。</p>
<p>关于后端的语言和框架，这里不做推荐，因为后端语言和框架的选择更多是取决于你的熟悉程度，笔者因为工作和开源，用过 Java&#x2F;Spring、C#&#x2F;.NET、Ruby&#x2F;Rails、Nodejs&#x2F;Express、Python&#x2F;FastAPI、Go&#x2F;Gin 等后端框架，每个框架都有自己的优缺点，这里我只推荐你使用熟悉程度高和开源生态好的框架，因为在部署费用差不多的情况下，选择熟悉的框架可以提高开发效率。</p>
<p>推荐使用容器部署的方案，而不是自己管理主机部署，关于容器部署的平台，推荐 <a target="_blank" rel="noopener" href="https://railway.app/">Railway</a> 和 <a target="_blank" rel="noopener" href="https://fly.io/">Fly.io</a>，这两个平台都是容器部署和管理比较丝滑的平台，除了部署后端外，也可以部署数据库等服务。推荐理由是这两个平台因为个人开源活跃度还算高的原因，都送了我每月 $5 的免费额度，而且用完后确实感觉还不错。</p>
<h2 id="Mobile"><a href="#Mobile" class="headerlink" title="Mobile"></a>Mobile</h2><p>如果你的项目还需要移动端 App，我本人对于原生应用开发的话不是太了解（除了很早之前写过 android 后再也没接触过原生应用开发），这里推荐 <a target="_blank" rel="noopener" href="https://docs.t4stack.com/tech-stack">T4 Stack</a>，移动端主要用的是 <a target="_blank" rel="noopener" href="https://expo.dev/">Expo</a>，其它和本文大部分的技术栈重合，可以减少学习和开发的成本。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://storage.guangzhengli.com/images/t4-stack.png" alt="Image 1: t4-stack"></p>
<h2 id="Auth"><a href="#Auth" class="headerlink" title="Auth"></a>Auth</h2><p>关于 Auth 相关的框架和云服务，我个人的体验是，如果你的业务 auth 需求不复杂，加上使用 Nextjs + <a target="_blank" rel="noopener" href="https://next-auth.js.org/">NextAuth.js</a> 这样的技术栈，那么直接使用 <a target="_blank" rel="noopener" href="https://next-auth.js.org/">NextAuth.js</a> 集成像 Google OAuth、Github OAuth、Azure AD 等社交登录和 JWT 鉴权是最方便的。</p>
<p>无需管理用户密码、无需自己负责登陆安全，只需要简单的配置和代码即可实现。更重要的是，不需要集成其它的云服务，减少了复杂度和成本。</p>
<p>像老牌的 <a target="_blank" rel="noopener" href="https://auth0.com/">Auth0</a> 或者新兴的 <a target="_blank" rel="noopener" href="https://clerk.com/">Clerk</a> 这样的云服务，虽然功能性和生态性都挺好，但是免费套餐比较少，后续的收费也非常的昂贵，所以需要根据自己的需求来抉择。</p>
<p>例如 <a target="_blank" rel="noopener" href="https://clerk.com/">Clerk</a> 的免费套餐只支持 10000 的 MAU(Monthly Active User)，后续的收费是 $0.02&#x2F;MAU，这意味着后续每多一万个月度活跃用户，就需要多 $200 的账单，还是比较昂贵的。所以对于独立开发者来说，如果你的项目大部分都是付费用户，那么初期选择 <a target="_blank" rel="noopener" href="https://auth0.com/">Auth0</a> 或者 <a target="_blank" rel="noopener" href="https://clerk.com/">Clerk</a> 是又方便又稳定的，但是如果是免费用户多的项目，选择这些云服务商就需要考虑成本了。</p>
<h3 id="Supabase-Auth"><a href="#Supabase-Auth" class="headerlink" title="Supabase Auth"></a><a target="_blank" rel="noopener" href="https://supabase.com/auth">Supabase Auth</a></h3><p>如果你的业务 auth 需求比较复杂，例如需要自定义登录、注册、密码找回、2FA 认证等，那么推荐使用 <a target="_blank" rel="noopener" href="https://supabase.com/auth">Supabase Auth</a>。支持 5w 的月活用户（$25&#x2F;m 后支持 10w 的 MAU，这足以满足绝大多数的项目啦），服务稳定，用户管理可以和数据库可以放在一起，而且支持社交登录、邮箱密码登录、2FA 等功能。</p>
<h3 id="Cloudflare-Zero-Trust"><a href="#Cloudflare-Zero-Trust" class="headerlink" title="Cloudflare Zero Trust"></a><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/cloudflare-one/">Cloudflare Zero Trust</a></h3><p>如果你的用户体量非常少 (少于 50 人)，或者你需要给你的合作伙伴、家人、朋友提供一个安全的访问你的项目的方式，那么非常推荐使用 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/zh-cn/teams/zero-trust/">Cloudflare Zero Trust</a>。Zero Trust 是一个基于 Cloudflare 的安全服务，可以通过不修改一行代码，仅仅是通过简单的配置，就可以让你的项目只能被你指定的用户邮箱或者固定 IP 访问。</p>
<p>这个方案的缺点是你的域名必须是通过 Cloudflare 托管，并且因为 Cloudflare Zero Trust 的免费额度是 50 人，超过之后非常的昂贵。所以这个方案只适合小团队或者个人使用。</p>
<p>但是优点也非常明显，不需要额外的代码和服务，只需要简单的配置，就可以让你的项目安全的被访问。非常适合私有的项目，例如搭建 <a target="_blank" rel="noopener" href="https://github.com/lobehub/lobe-chat">Lobe Chat</a> 或者 <a target="_blank" rel="noopener" href="https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web">ChatGPT-Next-Web</a> 这样的 GPT 项目给家人朋友使用。甚至可以配合 Cloudflare R2 来搭建私有图床等，这里就不过多展开了。</p>
<h2 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h2><p>数据库的选择非常的重要也非常的多样，因为本身数据库的选型就很多 (MySQL、PostgreSQL、MongoDB、SQLite、Redis 等)，再加上云服务商的竞争，所以这里只推荐一些比较好用的云服务商。</p>
<h3 id="Supabase-Database"><a href="#Supabase-Database" class="headerlink" title="Supabase Database"></a>Supabase Database</h3><p>如果是传统的关系型数据库，我推荐使用 PostgreSQL，PostgreSQL 的开源社区确实是一直以来最好的，体现在功能、易用性、开源生态上都胜过 MySQL 不止一筹。</p>
<p>对应的云服务厂商也有 <a target="_blank" rel="noopener" href="https://supabase.com/">Supabase</a> 这个备受好评的数据库提供商，它支持免费的 500M 存储的两个数据库项目，支持 Postgres 的所有功能，还有很多的插件和工具，例如 Vector <a target="_blank" rel="noopener" href="https://guangzhengli.com/blog/zh/vector-database/">向量数据库</a>等。虽然后续的收费也不便宜，但是对于独立开发者来说，免费和标准版足够在前中期使用了。如果后续不够用，可以考虑在 Fly.io 上自建数据库再迁移。</p>
<p>并且 Supabase 这个团队非常的活跃，开源社区也非常的好，除了我们上面提到的 <a target="_blank" rel="noopener" href="https://supabase.com/auth">Supabase Auth</a>，还有像<a target="_blank" rel="noopener" href="https://supabase.com/storage">Supabase Storage</a>、<a target="_blank" rel="noopener" href="https://supabase.com/realtime">Supabase Realtime</a>、<a target="_blank" rel="noopener" href="https://supabase.com/functions">Supabase Functions</a> 等服务，都是不错的服务。</p>
<p>与 Supabase Database 类似的还有 Serverless Postgres 如 <a target="_blank" rel="noopener" href="https://neon.tech/">Neon</a> 也还不错。</p>
<h3 id="Cloudflare-D1"><a href="#Cloudflare-D1" class="headerlink" title="Cloudflare D1"></a>Cloudflare D1</h3><p>如果要选择更便宜并且能支撑项目稳定运行的数据库，我推荐使用 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/zh-cn/products/distributed-sql-database/">Cloudflare D1</a>，它是一个 edge sqlite 数据库，虽然 SQLite 不如 Postgres 功能强大，但胜在可以部署在全球各地的 CDN 节点上，这意味着你的数据库可以离用户更近，减少延迟，提高速度。</p>
<p>而且最近看到 D1 和<a target="_blank" rel="noopener" href="https://www.prisma.io/">Prisma</a> 可以集成，这意味着你可以使用 Prisma ORM 来操作 D1 数据库，这对于全栈项目来说也是非常的方便。详情可以看这篇<a target="_blank" rel="noopener" href="https://blog.cloudflare.com/prisma-orm-and-d1">博客</a>。</p>
<p>选择 D1 的最大优势就是价格足够便宜，免费额度是 5GB，后续也只需要 $0.75&#x2F;mo，并且同时可以使用 Cloudflare KV、R2、Queues 等服务，可以很好的和 Cloudflare Worker 配合使用。</p>
<h3 id="Upstash"><a href="#Upstash" class="headerlink" title="Upstash"></a>Upstash</h3><p>如果你的项目需要轻量级的使用 Redis，那么推荐使用 <a target="_blank" rel="noopener" href="https://upstash.com/">Upstash</a>，可以用来存储一些热数据、缓存等。这个云服务商同样提供像 Kafka、Vector 向量数据库等服务。并且后续也是按量收费，也算是比较推荐的。</p>
<h2 id="Payment"><a href="#Payment" class="headerlink" title="Payment"></a>Payment</h2><p>支付提供服务商的选择不多，因为支付关系到安全、税务、金融监管、法律等等，是最不推荐自己造轮子或者使用小众云服务商的。这里只推荐比较大且适合的。</p>
<h3 id="Stripe"><a href="#Stripe" class="headerlink" title="Stripe"></a>Stripe</h3><p><a target="_blank" rel="noopener" href="https://stripe.com/">Stripe</a> 是国外公认最好的支付服务商，支付全球大部分国家的货币，并且抽成也还算公道。从开发角度来讲，也是开发文档齐全，开源生态最完善的支付服务提供商。</p>
<p>关于 <a target="_blank" rel="noopener" href="https://stripe.com/">Stripe</a> 并不想花费太多笔墨，它的优点很明显，缺点也很明显，因为国内大部分的人都很难注册并使用 Stripe，注册 Stripe 除了一些偏门和有被封风险的方案，最稳妥的还是在国外注册一个公司，然后通过公司注册 Stripe。</p>
<p>但是对于独立开发者来讲，在国外运营一家公司并不是一件容易的事情，注册公司通过一些渠道还是比较容易的，但是公司的税务、法务等问题就比较复杂了，所以这里只是提一下，如果你有条件注册 Stripe，那么推荐使用 Stripe。</p>
<h3 id="Lemonsquzz"><a href="#Lemonsquzz" class="headerlink" title="Lemonsquzz"></a><a target="_blank" rel="noopener" href="https://www.lemonsqueezy.com/">Lemonsquzz</a></h3><p>如果你没有条件使用 Stripe 的话，这里推荐使用 <a target="_blank" rel="noopener" href="https://www.lemonsqueezy.com/">Lemonsquzz</a> 作为替代，它也是一个国外的支付服务商，支持外国信用卡、PayPal 等支付渠道，也支持国内支付宝、微信等支付方式。特别在国外比较常见的订阅收款上，<a target="_blank" rel="noopener" href="https://www.lemonsqueezy.com/">Lemonsquzz</a> 支持支付宝进行订阅周期付款，可以做到国内国外用户的支付统一。</p>
<p>虽然它的抽成比 Stripe 要高，稳定性也不如 Stripe，但是国内的独立开发者可以直接注册使用，无需注册公司。并且也有一系列的增值服务可以使用，例如折扣管理、订阅管理、提供支付页面等等。所以如果你打算初期先跑通商业模式，那么可以考虑初期先用 <a target="_blank" rel="noopener" href="https://www.lemonsqueezy.com/">Lemonsquzz</a>，后期再考虑注册公司使用 Stripe。</p>
<p>相同的替代品还有 <a target="_blank" rel="noopener" href="https://www.paddle.com/">Paddle</a>。</p>
<h2 id="Statistics"><a href="#Statistics" class="headerlink" title="Statistics"></a>Statistics</h2><p>对于数据观测来讲，一般有业务上的数据分析，例如访问量、哪个页面点击多、哪个功能受欢迎等等。也有技术上的数据分析，例如网站的性能、日志报错分析等。这里推荐几个比较好用的数据分析工具。</p>
<h3 id="网站分析"><a href="#网站分析" class="headerlink" title="网站分析"></a>网站分析</h3><p>对于网站的分析，我推荐使用 <a target="_blank" rel="noopener" href="https://umami.is/">Umami</a>，它是一个开源的网站分析工具，可以免费托管在 Vercel + Supabase 上，通过引入 script 来自己进行数据收集，不需要担心数据泄露和隐私问题。</p>
<p>目前我这个博客网站的数据分析就是使用的 <a target="_blank" rel="noopener" href="https://umami.is/">Umami</a>，大家可以点击这个<a target="_blank" rel="noopener" href="https://analytics.guangzhengli.com/share/o3zAba1V/guangzhengli">网站</a>来看看效果。</p>
<p>如果你想要更加强大的数据分析，例如用户行为录制、网站热点功能分析等，那么推荐使用微软出品的 <a target="_blank" rel="noopener" href="https://clarity.microsoft.com/">clarity</a>，它是一个宣称永久免费的网站分析工具，微软会收集数据投喂 AI 等等，但不会共享给第三方。</p>
<p>同理 Google Analytics 等也是不错的选择，有时间可以考虑都集成一下，毕竟有了数据，才能从里面挖掘出一些有用的信息。</p>
<h3 id="分析工具"><a href="#分析工具" class="headerlink" title="分析工具"></a>分析工具</h3><ul>
<li>Logs: 日志分析<ul>
<li><a target="_blank" rel="noopener" href="https://newrelic.com/">NewRelic</a> 提供 100G 的使用额度，可以用来记录 Log、APM 等，分析错误日志，API 性能等。</li>
<li><a target="_blank" rel="noopener" href="https://betterstack.com/logs/pricing">betterstack</a> 提供 1GB&#x2F;mo，经常用来集成纯前端项目的日志分析。</li>
<li><a target="_blank" rel="noopener" href="https://www.sumologic.com/pricing/">sumologic</a> 最近发现的日志平台，用起来也还不错。</li>
</ul>
</li>
<li>Performance: 性能分析<ul>
<li><a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed</a> Google 家的 PageSpeed Insights，可以用来分析前端网页性能。</li>
<li><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/lighthouse/overview/">LightHouse</a> Google 出品的提高网页质量工具，包括但不限于分析网页性能、SEO、可访问性等。</li>
</ul>
</li>
<li>SEO: 搜索引擎优化<ul>
<li><a target="_blank" rel="noopener" href="https://search.google.com/search-console/about">Google Search Console</a> Google 官方的搜索引擎优化工具，可以用来分析网站在 Google 搜索引擎的表现。</li>
<li><a target="_blank" rel="noopener" href="https://chromewebstore.google.com/detail/meta-seo-inspector/ibkclpciafdglkjkcibmohobjkcfkaef">META SEO inspector</a> Chrome 插件，可以用来分析网页的 SEO 信息。SEO 可能国内的开发者了解的不多，但是在一些国外很多的业务场景下，SEO 的重要性影响到项目的成功与否。</li>
</ul>
</li>
</ul>
<h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><h3 id="IAC-Infrastructure-as-Code"><a href="#IAC-Infrastructure-as-Code" class="headerlink" title="IAC (Infrastructure as Code)"></a>IAC (Infrastructure as Code)</h3><p>对于独立开发者来讲，经常要使用很多不同的云服务商，例如发送邮件需要使用 AWS 使用 SES，Azure 使用一些 Identity 的功能，Clouflare 需要一些服务，NewRelic 需要创建对应的日志集，这些云服务商都有自己的 API 和 CLI 工具，但是如果你要在多个云服务商之间切换，对于心智来讲是一个不小的负担。</p>
<p>所以推荐使用 IAC 工具来统一管理，这里推荐使用<a target="_blank" rel="noopener" href="https://pulumi.com/">Pulumi</a>，<a target="_blank" rel="noopener" href="https://pulumi.com/">Pulumi</a> 支持使用代码的方式来管理你的云服务商，推荐的理由主要是它支持主流云服务商，支持多种语言 (JS, TS, Python 等)，并且有很多的社区支持。</p>
<h3 id="其它开发工具（暂时记起这些）"><a href="#其它开发工具（暂时记起这些）" class="headerlink" title="其它开发工具（暂时记起这些）"></a>其它开发工具（暂时记起这些）</h3><ul>
<li><a target="_blank" rel="noopener" href="https://buildkite.com/">Buildkite</a>: Pipeline 的额外补充，如果你选择的云服务商不提供 CI&#x2F;CD 服务，或者无法集成 Github Actions，那么可以考虑使用 <a target="_blank" rel="noopener" href="https://buildkite.com/">Buildkite</a>。</li>
<li><a target="_blank" rel="noopener" href="https://www.usebruno.com/">Bruno</a>: 一个类似 Postman 的本地 HTTP 请求工具，可以用来调试 API 请求。</li>
<li><a target="_blank" rel="noopener" href="https://proxyman.io/">proxyman</a> 代理抓包工具，可以用来调试、正向代理、反向代理等。</li>
</ul>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>最近在看《小而美：持续盈利的经营法则》这本书时，觉得作者提出了几个很有意思的观点，书中作者认为如果要做独立开发者，独立经营一个产品的话，最应该关注的，应该是尽快交付、尽早收费，不到最后不花钱。</p>
<p>首先尽快交付指的是快速迭代产品、快速试错。创建产品是在快速的反馈循环和迭代中汲取经验的过程，如果产品能够早早的面向消费者，那么消费者的沟通和反馈能够及时的帮助个人开发者，避免出现闭门造车的困境。对比起用一年的时间构建一个初始版本，然后每个季度发布一个大更新。也许将产品的构建时间缩短到月，然后每周甚至每天发布小版本的交付方式，更能够帮助独立开发者减少试错成本，尽快找到盈利的道路。</p>
<p>其次尽早收费也是非常重要的一环，即使你的产品收费 1 块钱，也和免费有本质的区别。独立开发者可以提供从免费开始的阶梯价格来进行产品定价，但绝不应该是完全免费，免费会拖垮产品的经营成本，也会让你无法判断产品的实际价值。正如经济学家丹·艾瑞里 (Dan Ariely) 在《怪诞行为学》(PredictablyIrrational) 一书中所写的：“人们会对免费的东西趋之若鹜，即使这并不是他们想要的。”</p>
<p>一旦产品开始进行收费，消费者便会认真思考这个产品是不是给他们带来了实际的价值，并且解决了他们的实际问题。收费和定价是一个很好的评估标准，来帮助独立开发者判断开发出来的产品是不是有实际价值的，否则，开发者应该尽早思考是否应该将精力放到其它产品上去，放到其它更能带来实际价值的产品中去。</p>
<p>最后一个建议是不到最后不花钱，这也是我们本文的主题。虽然书中指的是独立开发者不要通过广告和烧钱来期望获得巨大增长，但笔者认为，减少成本是独立开发者必须认真思考的问题，否则，过高的成本会带来沉重的增长压力，从而导致目的变成追求快速盈利，而非做好一个产品。</p>
<h3 id="精力是最大的成本"><a href="#精力是最大的成本" class="headerlink" title="精力是最大的成本"></a>精力是最大的成本</h3><p>对于大部分的独立开发者而言，在早期阶段都是一个人单打独斗，从产品的市场调研，到设计研发，最后到运营推广，每一个环节对于个人来讲都是非常消耗时间的，每个人的精力都非常有限，而对于独立开发者来讲，精力和时间就是最大的成本。我能给到的建议是，在不熟悉的领域善用 GenAI 来辅助，在产品早期阶段尽量使用成熟的 Saas 服务和各类 Pass 平台。</p>
<p>除了纯粹的移动端的工具开发者只需要考虑发布应用外，大多数的开发者需要考虑搭建官方网站、构建后端 API，考虑认证、授权、支付、统计、存储等等一系列的需求。这些需求在一定程度上都需要部署和托管，所以推荐大家使用云服务商来构建服务。</p>
<blockquote>
<p>写到最后，笔者忽然认为自己并没有什么实际的成功经验，更多的是基于构建开源 demo 和从国外论坛成功学习来的经验，主要是面向海外的访问流量，所以对于上面的建议，大家需要根据自己的需求来进行合理判断，聚焦自己的业务需求来进行技术选型。</p>
<p>也欢迎大家在下方的评论区留言，分享你的独立开发技术栈和云服务商的选择，让我们一起交流学习。</p>
</blockquote>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a target="_blank" rel="noopener" href="https://nextjs.org/">https://nextjs.org</a></li>
<li><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/">https://pages.cloudflare.com</a></li>
<li><a target="_blank" rel="noopener" href="https://nextra.site/docs/guide/ssg">https://nextra.site/docs/guide/ssg</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/">https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/</a></li>
<li><a target="_blank" rel="noopener" href="https://tailwindcss.com/">https://tailwindcss.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/why-shadcn-ui-is-so-popular-in-2023-0f95e66f3ddc">https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/why-shadcn-ui-is-so-popular-in-2023-0f95e66f3ddc</a></li>
<li><a target="_blank" rel="noopener" href="https://www.radix-ui.com/">https://www.radix-ui.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/t3-oss/create-t3-app">https://github.com/t3-oss/create-t3-app</a></li>
<li><a target="_blank" rel="noopener" href="https://ui.shadcn.com/blocks">https://ui.shadcn.com/blocks</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/platform/pricing/#workers">https://developers.cloudflare.com/workers/platform/pricing/#workers</a></li>
<li><a target="_blank" rel="noopener" href="https://next-auth.js.org/">https://next-auth.js.org/</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.cloudflare.com/prisma-orm-and-d1">https://blog.cloudflare.com/prisma-orm-and-d1</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cloudflare.com/zh-cn/products/distributed-sql-database/">https://www.cloudflare.com/zh-cn/products/distributed-sql-database/</a></li>
<li><a target="_blank" rel="noopener" href="https://neon.tech/">https://neon.tech/</a></li>
<li><a target="_blank" rel="noopener" href="https://supabase.com/">https://supabase.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://clarity.microsoft.com/">https://clarity.microsoft.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/lighthouse/overview/">https://developer.chrome.com/docs/lighthouse/overview/</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://guangzhengli.com/blog/zh/gpt-embeddings/">GPT 应用开发和思考</a></p>

<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>许可协议</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名 - 非商业性使用 - 相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2024/11/25/%E8%8D%AF%E9%85%92/">药酒</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2024/10/24/%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82API%E6%96%B9%E5%BC%8F/">前端请求 API 方式</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="text"><p>©2023-2024 <a href="/">Radiant Moon</a>。除非特别声明，所有文章均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91"><span class="toc-text">为什么是独立开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Frontend"><span class="toc-text">Frontend</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nextjs"><span class="toc-text">Nextjs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TailwindCSS-Shadcn-ui"><span class="toc-text">TailwindCSS + Shadcn&#x2F;ui</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-text">其它</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Backend"><span class="toc-text">Backend</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloudflare-Worker"><span class="toc-text">Cloudflare Worker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Railway-Fly-io"><span class="toc-text">Railway &amp; Fly.io</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mobile"><span class="toc-text">Mobile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Auth"><span class="toc-text">Auth</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Supabase-Auth"><span class="toc-text">Supabase Auth</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloudflare-Zero-Trust"><span class="toc-text">Cloudflare Zero Trust</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Database"><span class="toc-text">Database</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Supabase-Database"><span class="toc-text">Supabase Database</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloudflare-D1"><span class="toc-text">Cloudflare D1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Upstash"><span class="toc-text">Upstash</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Payment"><span class="toc-text">Payment</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Stripe"><span class="toc-text">Stripe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lemonsquzz"><span class="toc-text">Lemonsquzz</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Statistics"><span class="toc-text">Statistics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E5%88%86%E6%9E%90"><span class="toc-text">网站分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7"><span class="toc-text">分析工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Others"><span class="toc-text">Others</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IAC-Infrastructure-as-Code"><span class="toc-text">IAC (Infrastructure as Code)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%EF%BC%88%E6%9A%82%E6%97%B6%E8%AE%B0%E8%B5%B7%E8%BF%99%E4%BA%9B%EF%BC%89"><span class="toc-text">其它开发工具（暂时记起这些）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-text">后记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E5%8A%9B%E6%98%AF%E6%9C%80%E5%A4%A7%E7%9A%84%E6%88%90%E6%9C%AC"><span class="toc-text">精力是最大的成本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.29.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)

    const messages = {
      light: `切换到浅色模式`,
      dark: `切换到深色模式`,
      auto: `切换到跟随系统配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    }
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  window.addEventListener("DOMContentLoaded", (event) => {
    utils.js(`https://unpkg.com/lenis@1.1.9/dist/lenis.min.js`, { defer: true }).then(function () {
      const lenis = new Lenis({
        smoothWheel: true,
        duration: 1.2,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        lerp: 0.05,
        touchMultiplier: 2,
        wheelMultiplier: 1,
        infinite: false,
        autoResize: true,
      })
      const scrollFn = (time) => {
        lenis.raf(time)
        requestAnimationFrame(scrollFn)
      }
      requestAnimationFrame(scrollFn)

      // 定义自定义的 scrollTo 方法
      function smoothScrollTo(y = 0) {
        lenis.scrollTo(y)
      }

      // 覆盖 window.scrollTo 方法
      window.scrollTo = smoothScrollTo
    })
  })
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
